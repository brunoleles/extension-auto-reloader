var reloadedTabIds = [];function toggleExtensionReload(tab) {    var index = reloadedTabIds.indexOf(tab.id);    if (index > -1) {        reloadedTabIds.splice(index, 1);    } else {        reloadedTabIds.push(tab.id)    }}function updateBadge(tab) {    chrome.browserAction.setBadgeBackgroundColor({        color: "#4cb749"    });    console.log(reloadedTabIds)    var index = reloadedTabIds.indexOf(tab.id);    if (index > -1) {        chrome.browserAction.setBadgeText({            text: "OK"        });    } else {        chrome.browserAction.setBadgeText({            text: ""        });    }}function reloadExtensions() {    chrome.management.getAll(function (b) {        var d = {};        for (var c = 0; c < b.length; c++) {            d = b[c];            if ((d.installType == "development") && (d.enabled == true) && (d.name != "Auto Extension Reloader")) {                console.log(d.name + " reloaded");                (function (a) {                    chrome.management.setEnabled(d.id, false, function () {                        chrome.management.setEnabled(a, true)                    })                })(d.id)            }        }    });}chrome.browserAction.onClicked.addListener(function () {   chrome.tabs.query({'active': true}, function(tabs) {      toggleExtensionReload(tabs[0]);      updateBadge(tabs[0])   });});chrome.tabs.onActivated.addListener(function(activeInfo) {   chrome.tabs.get(activeInfo.tabId, updateBadge);});chrome.webNavigation.onBeforeNavigate.addListener(function(details) {    var index = reloadedTabIds.indexOf(details.tabId);    if (index > -1) reloadExtensions();});